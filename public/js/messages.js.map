{"version":3,"file":"js/messages.js","mappings":"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","sources":["webpack:///resources/js/pages/Messages.vue","webpack:///./resources/js/pages/Messages.vue?24ff","webpack:///./resources/js/pages/Messages.vue?f4e4","webpack:///./resources/js/pages/Messages.vue"],"sourcesContent":["<template>\n    <div class=\"bkt-messages bkt-page bkt-container\">\n        <h1 class=\"bkt-page__title\">\n            Сообщения\n        </h1>\n        <div class=\"bkt-content\">\n            <div class=\"row\" ref=\"cardList\">\n                <div class=\"col-12 col-lg-3\">\n                    <div class=\"bkt-history__chats\">\n                        <ul class=\"list-unstyled text-left pt-4 pb-4\">\n                            <li class=\"bkt-chat\" :class=\"{'bkt-bg-primary-lighter': selectedType=='all'}\" id=\"chat-1\"\n                                @click=\"setType('all')\"\n                            >\n                                Все\n                                <div class=\"bkt-chat__num rounded-pill bkt-bg-primary bkt-text-neutral-light\">\n                                    <span v-if=\"notifications_count.all > 0\" class=\"p-2\">\n                                        {{notifications_count.all}}\n                                    </span>\n                                </div>\n                            </li>\n                            <li class=\"bkt-chat\" :class=\"{'bkt-bg-green-lighter': selectedType=='platform'}\" id=\"chat-2\"\n                                @click=\"setType('platform')\"\n                            >\n                                <div class=\"bkt-chat__text\">\n                                    <bkt-icon :name=\"'Bell'\" :color=\"'green'\" width=\"15px\" height=\"15px\"/>\n                                    Сообщения платформы\n                                </div>\n\n                                <div class=\"bkt-chat__num rounded-pill bkt-bg-green bkt-text-neutral-light\">\n                                    <span v-if=\"notifications_count.platform > 0\" class=\"p-2\">\n                                        {{notifications_count.platform}}\n                                    </span>\n                                </div>\n                            </li>\n                            <li class=\"bkt-chat\" :class=\"{'bkt-bg-yellow-lighter': selectedType=='favourite'}\"\n                                id=\"chat-3\"\n                                @click=\"setType('favourite')\"\n                            >\n                                <div class=\"bkt-chat__text\">\n                                    <bkt-icon :name=\"'Star'\" :color=\"'yellow'\" width=\"15px\" height=\"15px\"/>\n                                    Избранное\n                                </div>\n                                <div class=\"bkt-chat__num rounded-pill bkt-bg-yellow bkt-text-neutral-light\">\n                                    <span v-if=\"notifications_count.favourite > 0\" class=\"p-2\">\n                                        {{notifications_count.favourite}}\n                                    </span>\n                                </div>\n                            </li>\n                            <li class=\"bkt-chat\" :class=\"{'bkt-bg-red-lighter': selectedType=='monitoring'}\" id=\"chat-4\"\n                                @click=\"setType('monitoring')\"\n                            >\n                                <div class=\"bkt-chat__text\">\n                                    <bkt-icon :name=\"'Target'\" :color=\"'red'\" width=\"15px\" height=\"15px\"/>\n                                    Мониторинг\n                                </div>\n\n                                <div class=\"rounded-pill bkt-bg-red bkt-text-neutral-light\">\n                                    <span v-if=\"notifications_count.monitoring > 0\" class=\"p-2\">\n                                        {{notifications_count.monitoring}}\n                                    </span>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                <div class=\"col-12 col-lg-9 bkt-gap-row-medium\">\n                    <div class=\"bkt-wrapper-column bkt-gap-row-medium\">\n                        <div v-show=\"!loading\" class=\"bkt-wrapper-column bkt-gap-mini\">\n                            <div class=\"bkt-message\" :class=\"{'bkt-cursor-pointer': message.type !== 'platform'}\"\n                                 v-for=\"(message, index) in items\" :key=\"index\" v-if=\"message\" @click=\"navigate(message)\"\n                            >\n                                <bkt-icon :name=\"'Check'\" :color=\"message.isSeen ? 'primary' : 'main-lighter'\"\n                                          width=\"15px\" height=\"15px\" class=\"bkt-message__check\"/>\n\n                                <div class=\"d-md-none bkt-wrapper-between w-100\">\n                                    <h6 class=\"bkt-message__date\">\n                                        {{ message.date | moment('D MMMM YYYY')}} в {{ message.date | moment('HH:mm')}}\n                                    </h6>\n                                    <div class=\"bkt-chat-content__info text-right\">\n                                        <div class=\"bkt-message__type\" :class=\"{'bkt-bg-red-lighter bkt-text-red': message.type=='monitoring',\n                                        'bkt-bg-yellow-lighter bkt-text-yellow': message.type=='favourite',\n                                        'bkt-bg-green-lighter bkt-text-green': message.type=='platform',}\"\n                                        >\n                                            {{ message.type=='monitoring' ? 'мониторинг' :''}}\n                                            {{ message.type=='favourite' ? 'избранное' :''}}\n                                            {{ message.type=='platform' ? 'сообщения платформы' :''}}\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class=\"bkt-wrapper-column bkt-message__content\">\n                                    <div class=\"bkt-wrapper bkt-nowrap me-auto ms-0\">\n                                        <div class=\"bkt-message__image-wrapper\" v-if=\"message.type=='favourite'\">\n                                            <!--                                            <img :src=\"message.dataFavourite\" alt=\"\" class=\"bkt-message__image\">-->\n                                            <bkt-card-image-category :no_multiple=\"true\"\n                                                :categories=\"message.dataFavourite.categories\"\n                                                v-if=\"(!message.dataFavourite.photos || message.dataFavourite.photos.length==0)\n                                            && message.dataFavourite.categories && message.dataFavourite.categories.length>0\"\n                                            >\n                                            </bkt-card-image-category>\n                                            <img\n                                                v-if=\"message.dataFavourite.photos && message.dataFavourite.photos.length>0\"\n                                                :src=\"message.dataFavourite.photos[0].preview\" alt=\"\"\n                                                class=\"bkt-message__image\"\n                                            >\n                                        </div>\n\n                                        <div class=\"bkt-chat-content__text\">\n                                            <div v-if=\"message.type == 'monitoring'&& message.dataMonitoring\"\n                                                 class=\"bkt-badge mx-0 mb-2\"\n                                                 :class=\"message.dataMonitoring.folderInfo.color ?\n                                                'bkt-bg-'+message.dataMonitoring.folderInfo.color :'bkt-bg-primary'\"\n                                            >\n                                                {{message.dataMonitoring.folderInfo.name}}\n                                            </div>\n                                            <h5 v-if=\"message.type == 'monitoring'\"\n                                                class=\"bkt-message__text bkt-cursor-pointer\"\n                                            >\n                                                Появились новые лоты в мониторинге:\n                                                {{message.dataMonitoring ? message.dataMonitoring.newLotCount : '0'}}\n                                            </h5>\n                                            <h6 v-if=\"message.type == 'platform' && message.dataPlatform\"\n                                                class=\"bkt-message__title\"\n                                            >\n                                                {{message.dataPlatform.label}}\n                                            </h6>\n                                            <h5 v-if=\"message.type == 'platform'\" class=\"bkt-message__text\">\n                                                {{message.dataPlatform ? message.dataPlatform.value : ''}}\n                                            </h5>\n                                            <h6 v-if=\"message.type == 'favourite' && message.dataFavourite\"\n                                                class=\"bkt-message__title bkt-card__title bkt-text-truncate bkt-arrow-after bkt-cursor-pointer\"\n                                            >\n                                                {{message.dataFavourite.description}}\n                                            </h6>\n                                            <h5 v-if=\"message.type == 'favourite'\" class=\"bkt-message__text\">\n                                                {{message.dataFavourite ? message.dataFavourite.detail : ''}}\n                                            </h5>\n                                        </div>\n                                    </div>\n                                    <!--                                    <button v-if=\"message.btnText\" class=\"btn bkt-button p-4 primary mb-3\">-->\n                                    <!--                                        {{ message.btnText }}-->\n                                    <!--                                    </button>-->\n                                    <!--                                    <br class=\"d-none d-md-block\">-->\n                                    <h6 class=\"d-none d-md-block bkt-message__date\">\n                                        {{ message.date | moment('D MMMM YYYY')}} в {{ message.date | moment('HH:mm')}}\n                                    </h6>\n                                </div>\n\n                                <div class=\"bkt-message__type d-none d-md-block \"\n                                     :class=\"{'bkt-bg-red-lighter bkt-text-red': message.type=='monitoring',\n                                        'bkt-bg-yellow-lighter bkt-text-yellow': message.type=='favourite',\n                                        'bkt-bg-green-lighter bkt-text-green': message.type=='platform'}\"\n                                >\n                                    {{ message.type=='monitoring' ? 'мониторинг' :''}}\n                                    {{ message.type=='favourite' ? 'избранное' :''}}\n                                    {{ message.type=='platform' ? 'сообщения платформы' :''}}\n                                </div>\n                            </div>\n                        </div>\n                        <div v-show=\"loading||type_loading\" class=\"bkt-wrapper-column bkt-gap-mini\">\n                            <div class=\"bkt-message\" v-for=\"(message, index) in 20\" :key=\"index\">\n                                <skeleton width=\"15px\" height=\"15px\" skeleton_class=\"bkt-message__check\"></skeleton>\n                                <div class=\"d-md-none bkt-wrapper-between w-100\">\n                                    <skeleton skeleton_class=\"bkt-message__date mb-1\" height=\"12px\"></skeleton>\n                                    <div class=\"bkt-chat-content__info text-right\">\n                                        <skeleton skeleton_class=\"bkt-bkt-message__type\" width=\"92px\"></skeleton>\n                                    </div>\n                                </div>\n                                <div class=\"bkt-wrapper-column bkt-message__content\">\n                                    <div class=\"bkt-wrapper bkt-nowrap me-auto ms-0\">\n                                        <div class=\"bkt-message__image-wrapper\">\n                                            <skeleton skeleton_class=\"bkt-message__image\"></skeleton>\n                                        </div>\n                                        <div class=\"bkt-chat-content__text\">\n                                            <skeleton height=\"14px\" width=\"150px\" skeleton_class=\"mb-1\"></skeleton>\n                                            <skeleton height=\"12px\" width=\"60%\"></skeleton>\n                                        </div>\n                                    </div>\n                                    <skeleton height=\"12px\" skeleton_class=\"d-none d-md-block bkt-message__date\"></skeleton>\n                                </div>\n                                <skeleton skeleton_class=\"bkt-message__type d-none d-md-block\" width=\"92px\"></skeleton>\n                            </div>\n                        </div>\n                        <bkt-pagination\n                            v-if=\"pagination_data && !type_loading\"\n                            :limit=\"1\"\n                            :data=\"pagination_data\"\n                            @change-page=\"changePage\"\n                            :extraControls=\"false\"\n                        ></bkt-pagination>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import BktCardImageCategory from \"../components/CardImageCategory\";\n\n    export default {\n        name: \"Messages\",\n        components: {\n            BktCardImageCategory\n        },\n        data() {\n            return {\n                info_categories: [\n                    {id: 1, code: 'platform', title: 'сообщения платформы', color: 'green'},\n                    {id: 2, code: 'favourite', title: 'избранное', color: 'yellow'},\n                    {id: 3, code: 'monitoring', title: 'мониторинг', color: 'red'},\n                ],\n                selectedType: 'all',\n                type_loading: false,\n                signal: null,\n                controller: null,\n            }\n        },\n        created() {\n            let page = 1;\n            if (sessionStorage.getItem('messages_page')) {\n                page = sessionStorage.getItem('messages_page')\n            }\n            this.getData(page);\n        },\n        computed: {\n            items() {\n                return this.$store.getters.notifications;\n            },\n            pagination_data() {\n                return this.$store.getters.notifications_pagination;\n            },\n            loading() {\n                return this.$store.getters.notifications_loading;\n            },\n            notifications_count() {\n                return this.$store.getters.notifications_count;\n            },\n        },\n        methods: {\n            async getData(page = 1) {\n                this.controller = new AbortController();\n                this.signal = this.controller.signal;\n                let type = this.selectedType;\n                if (sessionStorage.getItem('messages_page_type')) {\n                    type = sessionStorage.getItem('messages_page_type');\n                    if(type != this.selectedType) {\n                        this.selectedType = type;\n                    }\n                }\n                sessionStorage.setItem('messages_page', page + '');\n                await this.$store.dispatch('getNotifications', {\n                    page: page,\n                    type: type,\n                    signal: this.signal\n                });\n            },\n            setType(type) {\n                // if (!this.loading) {\n                if (this.signal) {\n                    this.controller.abort();\n                }\n                this.type_loading = true;\n                this.selectedType = type;\n                sessionStorage.setItem('messages_page_type', type);\n                setTimeout(() => {\n                    this.getData(1).then(resp => {\n                        this.type_loading = false;\n                    }).catch(resp => {\n                        this.type_loading = false;\n                    });\n                }, 50)\n                // }\n            },\n            changePage(page) {\n                if (this.signal) {\n                    this.controller.abort();\n                }\n                setTimeout(() => {\n                    this.getData(page).then(()=> {\n                        const el = this.$refs.cardList;\n                        if (el) {\n                            requestAnimationFrame(() => {\n                                el.scrollIntoView({block: 'start', scrollBehavior: 'smooth'});\n                                requestAnimationFrame(() => {\n                                    el.scrollIntoView();\n                                })\n                            })\n                        }\n                    })\n                }, 50)\n            },\n            navigate(message) {\n                if(message.type === 'monitoring')\n                {\n                    sessionStorage.setItem('monitoring_path_id', message.dataMonitoring.folderInfo.pathId);\n                    sessionStorage.setItem('monitoring' + message.dataMonitoring.folderInfo.pathId + '_page', '1')\n                    this.$router.push('/monitoring');\n                }\n                if(message.type ==='favourite')\n                {\n                    this.$router.push('/lot/'+message.dataFavourite.id);\n                }\n                // this.$router.push(path);\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Messages.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Messages.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Messages.vue?vue&type=template&id=8c0212ba&scoped=true&\"\nimport script from \"./Messages.vue?vue&type=script&lang=js&\"\nexport * from \"./Messages.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8c0212ba\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"bkt-messages bkt-page bkt-container\"},[_c('h1',{staticClass:\"bkt-page__title\"},[_vm._v(\"\\n        Сообщения\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"bkt-content\"},[_c('div',{ref:\"cardList\",staticClass:\"row\"},[_c('div',{staticClass:\"col-12 col-lg-3\"},[_c('div',{staticClass:\"bkt-history__chats\"},[_c('ul',{staticClass:\"list-unstyled text-left pt-4 pb-4\"},[_c('li',{staticClass:\"bkt-chat\",class:{'bkt-bg-primary-lighter': _vm.selectedType=='all'},attrs:{\"id\":\"chat-1\"},on:{\"click\":function($event){return _vm.setType('all')}}},[_vm._v(\"\\n                            Все\\n                            \"),_c('div',{staticClass:\"bkt-chat__num rounded-pill bkt-bg-primary bkt-text-neutral-light\"},[(_vm.notifications_count.all > 0)?_c('span',{staticClass:\"p-2\"},[_vm._v(\"\\n                                    \"+_vm._s(_vm.notifications_count.all)+\"\\n                                \")]):_vm._e()])]),_vm._v(\" \"),_c('li',{staticClass:\"bkt-chat\",class:{'bkt-bg-green-lighter': _vm.selectedType=='platform'},attrs:{\"id\":\"chat-2\"},on:{\"click\":function($event){return _vm.setType('platform')}}},[_c('div',{staticClass:\"bkt-chat__text\"},[_c('bkt-icon',{attrs:{\"name\":'Bell',\"color\":'green',\"width\":\"15px\",\"height\":\"15px\"}}),_vm._v(\"\\n                                Сообщения платформы\\n                            \")],1),_vm._v(\" \"),_c('div',{staticClass:\"bkt-chat__num rounded-pill bkt-bg-green bkt-text-neutral-light\"},[(_vm.notifications_count.platform > 0)?_c('span',{staticClass:\"p-2\"},[_vm._v(\"\\n                                    \"+_vm._s(_vm.notifications_count.platform)+\"\\n                                \")]):_vm._e()])]),_vm._v(\" \"),_c('li',{staticClass:\"bkt-chat\",class:{'bkt-bg-yellow-lighter': _vm.selectedType=='favourite'},attrs:{\"id\":\"chat-3\"},on:{\"click\":function($event){return _vm.setType('favourite')}}},[_c('div',{staticClass:\"bkt-chat__text\"},[_c('bkt-icon',{attrs:{\"name\":'Star',\"color\":'yellow',\"width\":\"15px\",\"height\":\"15px\"}}),_vm._v(\"\\n                                Избранное\\n                            \")],1),_vm._v(\" \"),_c('div',{staticClass:\"bkt-chat__num rounded-pill bkt-bg-yellow bkt-text-neutral-light\"},[(_vm.notifications_count.favourite > 0)?_c('span',{staticClass:\"p-2\"},[_vm._v(\"\\n                                    \"+_vm._s(_vm.notifications_count.favourite)+\"\\n                                \")]):_vm._e()])]),_vm._v(\" \"),_c('li',{staticClass:\"bkt-chat\",class:{'bkt-bg-red-lighter': _vm.selectedType=='monitoring'},attrs:{\"id\":\"chat-4\"},on:{\"click\":function($event){return _vm.setType('monitoring')}}},[_c('div',{staticClass:\"bkt-chat__text\"},[_c('bkt-icon',{attrs:{\"name\":'Target',\"color\":'red',\"width\":\"15px\",\"height\":\"15px\"}}),_vm._v(\"\\n                                Мониторинг\\n                            \")],1),_vm._v(\" \"),_c('div',{staticClass:\"rounded-pill bkt-bg-red bkt-text-neutral-light\"},[(_vm.notifications_count.monitoring > 0)?_c('span',{staticClass:\"p-2\"},[_vm._v(\"\\n                                    \"+_vm._s(_vm.notifications_count.monitoring)+\"\\n                                \")]):_vm._e()])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"col-12 col-lg-9 bkt-gap-row-medium\"},[_c('div',{staticClass:\"bkt-wrapper-column bkt-gap-row-medium\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading),expression:\"!loading\"}],staticClass:\"bkt-wrapper-column bkt-gap-mini\"},_vm._l((_vm.items),function(message,index){return (message)?_c('div',{key:index,staticClass:\"bkt-message\",class:{'bkt-cursor-pointer': message.type !== 'platform'},on:{\"click\":function($event){return _vm.navigate(message)}}},[_c('bkt-icon',{staticClass:\"bkt-message__check\",attrs:{\"name\":'Check',\"color\":message.isSeen ? 'primary' : 'main-lighter',\"width\":\"15px\",\"height\":\"15px\"}}),_vm._v(\" \"),_c('div',{staticClass:\"d-md-none bkt-wrapper-between w-100\"},[_c('h6',{staticClass:\"bkt-message__date\"},[_vm._v(\"\\n                                    \"+_vm._s(_vm._f(\"moment\")(message.date,'D MMMM YYYY'))+\" в \"+_vm._s(_vm._f(\"moment\")(message.date,'HH:mm'))+\"\\n                                \")]),_vm._v(\" \"),_c('div',{staticClass:\"bkt-chat-content__info text-right\"},[_c('div',{staticClass:\"bkt-message__type\",class:{'bkt-bg-red-lighter bkt-text-red': message.type=='monitoring',\n                                    'bkt-bg-yellow-lighter bkt-text-yellow': message.type=='favourite',\n                                    'bkt-bg-green-lighter bkt-text-green': message.type=='platform',}},[_vm._v(\"\\n                                        \"+_vm._s(message.type=='monitoring' ? 'мониторинг' :'')+\"\\n                                        \"+_vm._s(message.type=='favourite' ? 'избранное' :'')+\"\\n                                        \"+_vm._s(message.type=='platform' ? 'сообщения платформы' :'')+\"\\n                                    \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"bkt-wrapper-column bkt-message__content\"},[_c('div',{staticClass:\"bkt-wrapper bkt-nowrap me-auto ms-0\"},[(message.type=='favourite')?_c('div',{staticClass:\"bkt-message__image-wrapper\"},[((!message.dataFavourite.photos || message.dataFavourite.photos.length==0)\n                                        && message.dataFavourite.categories && message.dataFavourite.categories.length>0)?_c('bkt-card-image-category',{attrs:{\"no_multiple\":true,\"categories\":message.dataFavourite.categories}}):_vm._e(),_vm._v(\" \"),(message.dataFavourite.photos && message.dataFavourite.photos.length>0)?_c('img',{staticClass:\"bkt-message__image\",attrs:{\"src\":message.dataFavourite.photos[0].preview,\"alt\":\"\"}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"bkt-chat-content__text\"},[(message.type == 'monitoring'&& message.dataMonitoring)?_c('div',{staticClass:\"bkt-badge mx-0 mb-2\",class:message.dataMonitoring.folderInfo.color ?\n                                            'bkt-bg-'+message.dataMonitoring.folderInfo.color :'bkt-bg-primary'},[_vm._v(\"\\n                                            \"+_vm._s(message.dataMonitoring.folderInfo.name)+\"\\n                                        \")]):_vm._e(),_vm._v(\" \"),(message.type == 'monitoring')?_c('h5',{staticClass:\"bkt-message__text bkt-cursor-pointer\"},[_vm._v(\"\\n                                            Появились новые лоты в мониторинге:\\n                                            \"+_vm._s(message.dataMonitoring ? message.dataMonitoring.newLotCount : '0')+\"\\n                                        \")]):_vm._e(),_vm._v(\" \"),(message.type == 'platform' && message.dataPlatform)?_c('h6',{staticClass:\"bkt-message__title\"},[_vm._v(\"\\n                                            \"+_vm._s(message.dataPlatform.label)+\"\\n                                        \")]):_vm._e(),_vm._v(\" \"),(message.type == 'platform')?_c('h5',{staticClass:\"bkt-message__text\"},[_vm._v(\"\\n                                            \"+_vm._s(message.dataPlatform ? message.dataPlatform.value : '')+\"\\n                                        \")]):_vm._e(),_vm._v(\" \"),(message.type == 'favourite' && message.dataFavourite)?_c('h6',{staticClass:\"bkt-message__title bkt-card__title bkt-text-truncate bkt-arrow-after bkt-cursor-pointer\"},[_vm._v(\"\\n                                            \"+_vm._s(message.dataFavourite.description)+\"\\n                                        \")]):_vm._e(),_vm._v(\" \"),(message.type == 'favourite')?_c('h5',{staticClass:\"bkt-message__text\"},[_vm._v(\"\\n                                            \"+_vm._s(message.dataFavourite ? message.dataFavourite.detail : '')+\"\\n                                        \")]):_vm._e()])]),_vm._v(\" \"),_c('h6',{staticClass:\"d-none d-md-block bkt-message__date\"},[_vm._v(\"\\n                                    \"+_vm._s(_vm._f(\"moment\")(message.date,'D MMMM YYYY'))+\" в \"+_vm._s(_vm._f(\"moment\")(message.date,'HH:mm'))+\"\\n                                \")])]),_vm._v(\" \"),_c('div',{staticClass:\"bkt-message__type d-none d-md-block\",class:{'bkt-bg-red-lighter bkt-text-red': message.type=='monitoring',\n                                    'bkt-bg-yellow-lighter bkt-text-yellow': message.type=='favourite',\n                                    'bkt-bg-green-lighter bkt-text-green': message.type=='platform'}},[_vm._v(\"\\n                                \"+_vm._s(message.type=='monitoring' ? 'мониторинг' :'')+\"\\n                                \"+_vm._s(message.type=='favourite' ? 'избранное' :'')+\"\\n                                \"+_vm._s(message.type=='platform' ? 'сообщения платформы' :'')+\"\\n                            \")])],1):_vm._e()}),0),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading||_vm.type_loading),expression:\"loading||type_loading\"}],staticClass:\"bkt-wrapper-column bkt-gap-mini\"},_vm._l((20),function(message,index){return _c('div',{key:index,staticClass:\"bkt-message\"},[_c('skeleton',{attrs:{\"width\":\"15px\",\"height\":\"15px\",\"skeleton_class\":\"bkt-message__check\"}}),_vm._v(\" \"),_c('div',{staticClass:\"d-md-none bkt-wrapper-between w-100\"},[_c('skeleton',{attrs:{\"skeleton_class\":\"bkt-message__date mb-1\",\"height\":\"12px\"}}),_vm._v(\" \"),_c('div',{staticClass:\"bkt-chat-content__info text-right\"},[_c('skeleton',{attrs:{\"skeleton_class\":\"bkt-bkt-message__type\",\"width\":\"92px\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"bkt-wrapper-column bkt-message__content\"},[_c('div',{staticClass:\"bkt-wrapper bkt-nowrap me-auto ms-0\"},[_c('div',{staticClass:\"bkt-message__image-wrapper\"},[_c('skeleton',{attrs:{\"skeleton_class\":\"bkt-message__image\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"bkt-chat-content__text\"},[_c('skeleton',{attrs:{\"height\":\"14px\",\"width\":\"150px\",\"skeleton_class\":\"mb-1\"}}),_vm._v(\" \"),_c('skeleton',{attrs:{\"height\":\"12px\",\"width\":\"60%\"}})],1)]),_vm._v(\" \"),_c('skeleton',{attrs:{\"height\":\"12px\",\"skeleton_class\":\"d-none d-md-block bkt-message__date\"}})],1),_vm._v(\" \"),_c('skeleton',{attrs:{\"skeleton_class\":\"bkt-message__type d-none d-md-block\",\"width\":\"92px\"}})],1)}),0),_vm._v(\" \"),(_vm.pagination_data && !_vm.type_loading)?_c('bkt-pagination',{attrs:{\"limit\":1,\"data\":_vm.pagination_data,\"extraControls\":false},on:{\"change-page\":_vm.changePage}}):_vm._e()],1)])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"names":["name","components","BktCardImageCategory","data","info_categories","id","code","title","color","selectedType","type_loading","signal","controller","created","page","computed","items","pagination_data","loading","notifications_count","methods","getData","type","sessionStorage","setType","setTimeout","changePage","requestAnimationFrame","el","block","scrollBehavior","navigate","message","_vm","this","_c","_self","staticClass","_v","ref","class","attrs","on","$event","all","_s","_e","platform","favourite","monitoring","directives","rawName","value","expression","_l","index","key","isSeen","_f","date","dataFavourite","photos","length","categories","preview","dataMonitoring","folderInfo","newLotCount","dataPlatform","label","description","detail"],"sourceRoot":""}